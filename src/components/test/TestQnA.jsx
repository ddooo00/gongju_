import React, { useState } from "react";

function TestQnA() {
  const [page, setPage] = useState(0);

  //ìœ í˜• í…ŒìŠ¤íŠ¸ QnA
  //TODO:db.jsonìœ¼ë¡œ ë„˜ê²¨ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ê¸°
  const questionList = [
    {
      q: ["ì¹œêµ¬ ìƒì¼ íŒŒí‹°ì— ì˜ìƒê¸´ ì‚¬ëŒì„ ë´¤ë‹¤."],
      a: [
        { type: "C", text: "ë¨¼ì € ë‹¤ê°€ê°€ ë§ì„ ê±´ë‹¤." },
        { type: "B", text: "ì–´ê¹¨ë™ë¬´ë¥¼ í•˜ë©° ì¹œí•œ ì²™ì„ í•œë‹¤." },
        { type: "D,E", text: "ê·¸ëƒ¥ ë§›ìˆëŠ” ê±° ë¨¹ìœ¼ë©´ì„œ ì‚¬ì§„ì´ë‚˜ ì°ëŠ”ë‹¤." },
        { type: "A", text: "ì¶¤ì„ ì¶”ë©´ì„œ ë‹¤ê°€ê°€ì„œ ì¸ì‚¬í•œë‹¤." },
      ],
    },
    {
      q: ["ì‚°ì— ì˜¬ë¼ê°”ëŠ”ë° ì‚°ì‚¼ì„ ì°¾ì•˜ë‹¤!"],
      a: [
        { type: "B", text: "ë°”ë¡œ ë•… íŒŒì„œ ì‹¬ ë´¤ë‹¤!ë¥¼ ì™¸ì¹œë‹¤." },
        { type: "C,D", text: "ì¡°ì‹¬íˆ ì±™ê²¨ì„œ ë¹„ì‹¸ê²Œ íŒë‹¤." },
        { type: "E", text: "ìš°ì™€~ëŒ€ë°•ì´ì•¼ í•˜ë©° ì‚¬ì§„ì„ ì°ì–´ SNSì— ìë‘í•œë‹¤." },
        { type: "A", text: "ì§‘ ê°€ì„œ ì”ì¹˜ë¥¼ ë²Œì¸ë‹¤." },
      ],
    },
    {
      q: ["ê¸¸ì„ ê°€ë‹¤ê°€ ê³°ì¸í˜•ì„ ë°œê²¬í–ˆë‹¤. ê³°ì¸í˜•ì„ ì•ì—ì„œ ë³´ë©´?"],
      a: [
        { type: "A", text: "ìœ™í¬ë¥¼ í•˜ê³  ìˆë‹¤." },
        { type: "B", text: "ê³µê³¼ ë°°íŠ¸ë¥¼ ê°€ì§€ê³  ìˆë‹¤." },
        { type: "D,E", text: "ì±…ê³¼ ë²Œê¿€í†µì„ ë“¤ê³ ìˆë‹¤." },
        { type: "C", text: "ì•„ë¬´ê²ƒë„ ë“¤ê³  ìˆì§€ ì•Šë‹¤." },
      ],
    },
    {
      q: ["ì”¨ì•—ì„ ì‹¬ìœ¼ë ¤ê³  í•œë‹¤. ì–´ë–¤ ì”¨ì•—ì„ ì‹¬ì„ ê²ƒì¸ê°€?"],
      a: [
        { type: "A,E", text: "ë¹›ë‚˜ëŠ” í™©ê¸ˆë¹› ì”¨ì•—" },
        { type: "D", text: "ì—„ì²­ë‚˜ê²Œ ì»¤ë‹¤ë€ ì”¨ì•—" },
        { type: "B", text: "ëŒë§Œí¼ ë‹¨ë‹¨í•œ ì”¨ì•—" },
        { type: "C", text: "ë‚´ê°€ ì˜ ì•Œê³  ìˆëŠ” ì”¨ì•—" },
      ],
    },
    {
      q: [
        "ê¸¸ì„ ê±´ë„ˆë ¤ê³  í•˜ëŠ”ë° ê±´ë„ˆí¸ì—ì„œ ë¬´ì–¸ê°€ê°€ ë‚˜ë¥¼ í–¥í•´ ë‹¬ë ¤ì˜¤ê³  ìˆë‹¤. ë‹¬ë ¤ì˜¤ê³  ìˆëŠ” ê²ƒì€ ë¬´ì—‡ì¼ê¹Œ?",
      ],
      a: [
        { type: "B", text: "ìì „ê±°" },
        { type: "A,D", text: "ì „ì• ì¸" },
        { type: "E", text: "ì–¼ë£©ë§" },
        { type: "C", text: "ê²½ì°°" },
      ],
    },
    {
      q: ["ë†€ì´ê³µì› íì¥ 30ë¶„ ì „ì´ë‹¤. ì´ë•Œ ë‚˜ëŠ”?"],
      a: [
        { type: "D", text: "ì•„ê¹Œ ëª»ë¨¹ì€ ì¸„ëŸ¬ìŠ¤ê°€ ìƒê°ì´ ë‚˜ ì¤„ì„ ì„œ ì‚¬ë¨¹ëŠ”ë‹¤." },
        {
          type: "A,B",
          text: "ë§ˆì§€ë§‰ìœ¼ë¡œ ì•„ê¹Œ ì œì¼ ì¬ë°Œì—ˆë˜ ë†€ì´ê¸°êµ¬ë¥¼ í•œ ë²ˆ ë” íƒ€ëŸ¬ ê°„ë‹¤.",
        },
        {
          type: "E",
          text: "ì•„ì§ ì¸ìƒìƒ·ì„ ê±´ì§€ì§€ ëª»í•œ ê±¸ ê¹¨ë‹«ê³  ì‚¬ì§„ì„ ë” ì°ëŠ”ë‹¤.",
        },
        { type: "C", text: "ì´ì œ ë†€ë§Œí¼ ë†€ì•˜ìœ¼ë‹ˆê¹Œ ë†€ì´ê³µì›ì„ ë‚˜ê°„ë‹¤." },
      ],
    },
    {
      q: [
        "ì¹œêµ¬ì™€ ê°™ì´ ì‹œí—˜ê³µë¶€ë¥¼ í•˜ê¸°ë¡œ í–ˆëŠ”ë° ì§€ê°í•œ ë‹¹ì‹ . ì¹œêµ¬ëŠ” ë‹¨ë‹¨íˆ í™”ê°€ ë‚œ ìƒíƒœë‹¤. ì–´ë–»ê²Œ ì¹œêµ¬ì˜ í™”ë¥¼ í’€ì–´ì£¼ì§€?",
      ],
      a: [
        {
          type: "D,E",
          text: "ë§›ìˆëŠ” ê±° ë¨¹ìœ¼ë©´ ê¸ˆë°© í’€ë¦¬ì§€! ê³µë¶€í•˜ê¸° ì „, ì¸ìŠ¤íƒ€ ë§›ì§‘ìœ¼ë¡œ ë°ë ¤ê°„ë‹¤.",
        },
        {
          type: "C",
          text: "ê·¸ë˜ë„ ê³µë¶€ëŠ” í•´ì•¼ì§€! ì¹œêµ¬ê°€ ì›í•˜ë˜ ì¡±ë³´ë¥¼ ë„˜ê²¨ì£¼ê³  ê°™ì´í•˜ì!",
        },
        { type: "A", text: "ì§€ê°í–ˆëŠ”ë° ê³µë¶€ëŠ” ë¬´ìŠ¨! ìˆ ì´ë‚˜ ë§ˆì‹œëŸ¬ê°€ì." },
        { type: "B", text: "ë‚œ ì¤„ê²Œì—†ë‹¤. ì¹œêµ¬ ì§‘ ì•ê¹Œì§€ ì°¾ì•„ê°€ì„œ ì‹¹ì‹¹ ë¹ˆë‹¤." },
      ],
    },
    {
      q: [
        "ì¹œêµ¬ì™€ ê°™ì´ ì‹œí—˜ê³µë¶€ë¥¼ í•˜ê¸°ë¡œ í–ˆëŠ”ë° ì§€ê°í•œ ë‹¹ì‹ . ì¹œêµ¬ëŠ” ë‹¨ë‹¨íˆ í™”ê°€ ë‚œ ìƒíƒœë‹¤. ì–´ë–»ê²Œ ì¹œêµ¬ì˜ í™”ë¥¼ í’€ì–´ì£¼ì§€?",
      ],
      a: [
        {
          type: "D,E",
          text: "ë§›ìˆëŠ” ê±° ë¨¹ìœ¼ë©´ ê¸ˆë°© í’€ë¦¬ì§€! ê³µë¶€í•˜ê¸° ì „, ì¸ìŠ¤íƒ€ ë§›ì§‘ìœ¼ë¡œ ë°ë ¤ê°„ë‹¤.",
        },
        {
          type: "C",
          text: "ê·¸ë˜ë„ ê³µë¶€ëŠ” í•´ì•¼ì§€! ì¹œêµ¬ê°€ ì›í•˜ë˜ ì¡±ë³´ë¥¼ ë„˜ê²¨ì£¼ê³  ê°™ì´í•˜ì!",
        },
        { type: "A", text: "ì§€ê°í–ˆëŠ”ë° ê³µë¶€ëŠ” ë¬´ìŠ¨! ìˆ ì´ë‚˜ ë§ˆì‹œëŸ¬ê°€ì." },
        { type: "B", text: "ë‚œ ì¤„ê²Œì—†ë‹¤. ì¹œêµ¬ ì§‘ ì•ê¹Œì§€ ì°¾ì•„ê°€ì„œ ì‹¹ì‹¹ ë¹ˆë‹¤." },
      ],
    },
    {
      q: ["5ë¶„ë’¤ì— ì‹œë‚´ í•œë³µíŒì— í•µí­íƒ„ì´ ë–¨ì–´ì§„ë‹¤ê³  í•œë‹¤. ë‹¹ì‹ ì˜ í–‰ë™ì€?"],
      a: [
        {
          type: "A",
          text: "ì–´ì°¨í”¼ ì£½ì„ê±° ê°€ì¡±, ì§€ì¸ê³¼ ì‘ë³„ì¸ì‚¬ë¥¼ í•˜ê³  ë©‹ì§€ê²Œ ì£½ëŠ”ë‹¤.",
        },
        {
          type: "D",
          text: "ë¨¹ê³  ì£½ì€ ê·€ì‹ ì´ ë•Œê¹”ë„ ê³±ë‹¤. ë­ë¼ë„ í•˜ë‚˜ ë” ë¨¹ì",
        },
        {
          type: "B,C",
          text: "ìµœëŒ€í•œ í˜ì„ ë‹¤í•´ ë„ë§ê°€ì. ì§€í•˜ë¡œ ë„ë§ê°€ë©´ ì‚´ìˆ˜ë„ ìˆë‹¤.",
        },
        { type: "E", text: "ë§ˆì§€ë§‰ìœ¼ë¡œ ê¸°ë„í•´ì•¼ì§€." },
      ],
    },
    {
      q: ["ê°‘ìê¸° ìš”ì •ì´ ë‚˜íƒ€ë‚˜ì„œ ì›í•˜ëŠ” ê²ƒì„ ë“¤ì–´ì¤€ë‹¤ê³  í•œë‹¤."],
      a: [
        {
          type: "B,C",
          text: "ê³µì£¼ ë°”ë””ëŠ” 100ë§Œë¶ˆì§œë¦¬ ë°”ë””!",
        },
        {
          type: "A",
          text: "ë„ì‹¬ê³¼ 10ë¶„ ë–¨ì–´ì§„ '100í‰ ê¶ì „(ìê°€)",
        },
        {
          type: "D",
          text: "íŒŒì›Œ ë¸”ë¡œê±°ëŠ” ë‚˜ì˜ ê¿ˆ",
        },
        { type: "E", text: "ë¹„ì˜¤ëŠ” ë‚ ì´ ì œì¼ ì¢‹ì•„ ë‚˜ëŠ”ì•¼ ë¹„ì˜ ê³µì£¼~" },
      ],
    },
    {
      q: ["ë§ˆë…€ê°€ ë‚˜íƒ€ë‚˜ì„œ ì‚¬ê³¼ëŒ€ì‹  ì´ê²ƒì„ ì£¼ì—ˆë‹¤. ì´ê²ƒì´ ë­˜ê¹Œ?"],
      a: [
        {
          type: "B",
          text: "ë¹„íƒ€ë¯¼",
        },
        {
          type: "A",
          text: "100ë§Œ êµ¬ë…ì",
        },
        {
          type: "C,E",
          text: "ì£¼ë¨¹ë„ë¼",
        },
        { type: "D", text: "ì¿ í°" },
      ],
    },
    {
      q: ["í…ŒìŠ¤íŠ¸ê°€ ëë‚¬ìŠµë‹ˆë‹¤! ê²°ê³¼ë¥¼ ë³´ëŸ¬ ê°ˆê¹Œìš”?"],
      a: [{ type: "", text: "ê²°ê³¼ ë³´ëŸ¬ ê°€ê¸°â–¶â–¶" }],
    },
  ];
  console.log("ğŸ’›ğŸ’›ğŸ’›", questionList);

  //ìœ í˜• ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬
  const [gongjuList, setGongjuList] = useState([
    { name: "A", count: 0 },
    { name: "B", count: 0 },
    { name: "C", count: 0 },
    { name: "D", count: 0 },
    { name: "E", count: 0 },
  ]);

  const handleAnswerCount = (typeStr, idx) => {
    const types = typeStr.split(","); // typeì´ ì—¬ëŸ¬ ê°œì¸ ê²½ìš° ì½¤ë§ˆ(,)ë¡œ êµ¬ë¶„ëœ ë°°ì—´ë¡œ ë¶„ë¦¬

    let ls = gongjuList.map((item) => ({ ...item }));
    types.forEach((type) => {
      const gongjuItem = ls.find((item) => item.name === type);
      if (gongjuItem) {
        gongjuItem.count += 1;
      }
    });

    setGongjuList(ls);
    setPage(page + 1);

    if (idx + 1 === questionList.length) {
      console.log("ê²°ê³¼ë³´ê¸°");
    }
  };

  return (
    <>
      {page === 0 ? (
        <div>
          <div onClick={() => setPage(1)}>í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</div>
        </div>
      ) : page <= questionList.length ? (
        <div>
          <div>
            <div>ë‚˜ëŠ” ì–´ë–¤ ê³µì£¼ì¼ê¹Œ?</div>
            <div>{`${page} / ${questionList.length}`}</div>
          </div>

          {questionList.map((val, idx) => (
            <div
              key={idx}
              style={{ display: page === idx + 1 ? "flex" : "none" }}
            >
              {console.log(gongjuList)}
              {/* ì§ˆë¬¸ */}
              <div>
                {val.q.map((qval, qidx) => (
                  <div key={qidx}>{qval}</div>
                ))}
              </div>
              <div>
                {/* ì„ íƒì§€ */}
                <div>
                  {val.a.map((aval, aidx) => (
                    <div
                      key={aidx}
                      onClick={() => handleAnswerCount(aval.type, aidx)}
                    >
                      {aval.text}
                    </div>
                  ))}
                </div>
              </div>
            </div>
          ))}
        </div>
      ) : (
        <div>ê²°ê³¼í˜ì´ì§€</div>
      )}
    </>
  );
}

export default TestQnA;
